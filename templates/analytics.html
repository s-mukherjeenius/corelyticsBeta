{% extends "base.html" %}

{% block title %}Analytics - Corelytics{% endblock title %}

{% block page_title %}Analytics{% endblock page_title %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <div class="chart-card">
        <h5 class="text-2xl font-bold text-gray-800 mb-4">Daily Calorie Consumption</h5>
        <div id="calorieConsumptionChart" style="width: 100%; height: 350px;"></div>
    </div>

    <div class="chart-card">
        <h5 class="text-2xl font-bold text-gray-800 mb-4">Meal Type Distribution</h5>
        <div id="mealTypeDistributionChart" style="width: 100%; height: 350px;"></div>
    </div>

    <div class="chart-card">
        <h5 class="text-2xl font-bold text-gray-800 mb-4">Weight Progress</h5>
        <div id="weightProgressChart" style="width: 100%; height: 350px;"></div>
    </div>

    <div class="chart-card">
        <h5 class="text-2xl font-bold text-gray-800 mb-4">Macronutrient Breakdown</h5>
        <div class="text-gray-500 text-center py-5">
            <i class="fas fa-cogs fa-3x mb-3"></i>
            <p>Coming Soon! Detailed macronutrient analysis will be available here.</p>
        </div>
    </div>
</div>

<div class="bg-white p-6 rounded-3xl shadow-md mb-8">
    <h5 class="text-2xl font-bold text-gray-800 mb-4">Insights & Summaries</h5>
    <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center py-3">
            <div>
                <i class="fas fa-info-circle text-indigo-500 mr-2"></i> Average daily calorie intake:
            </div>
            <span class="text-gray-700 font-semibold">{{ average_calories }} Cal</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center py-3">
            <div>
                <i class="fas fa-calendar-alt text-indigo-500 mr-2"></i> Longest streak of meeting goals:
            </div>
            <span class="badge bg-secondary rounded-pill">Coming Soon</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center py-3">
            <div>
                <i class="fas fa-fire text-indigo-500 mr-2"></i> Total calories consumed this month:
            </div>
            <span class="text-gray-700 font-semibold">{{ '{:,}'.format(total_monthly_calories) }} Cal</span>
        </li>
    </ul>
</div>
{% endblock content %}


{% block scripts_extra %}
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">
    const calorieConsumptionData = JSON.parse('{{ calorie_consumption_data|safe }}');
    const mealTypeDistributionData = JSON.parse('{{ meal_type_distribution_data|safe }}');
    const weightProgressData = JSON.parse('{{ weight_progress_data|safe }}');
</script>

<script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
{% endblock scripts_extra %}